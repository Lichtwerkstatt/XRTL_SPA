(this["webpackJsonpxrtl-spa"]=this["webpackJsonpxrtl-spa"]||[]).push([[0],{146:function(e,n){},148:function(e,n){},162:function(e,n){},164:function(e,n){},192:function(e,n){},194:function(e,n){},195:function(e,n){},200:function(e,n){},202:function(e,n){},221:function(e,n){},233:function(e,n){},236:function(e,n){},253:function(e,n,t){},255:function(e,n,t){"use strict";t.r(n);var c=t(25),o=t(132),i=t.n(o),a=t(74),r=t.n(a),d=t(133),s=t(135),u=t(22),f=function(){var e=t(142),n={sub:"webcam",component:"component",iat:Date.now(),exp:Date.now()+18e7},o=e.sign(n,"keysecret"),i=t(254),a=Object(c.useState)({}),f=Object(s.a)(a,2),l=f[0],m=f[1],b=Object(c.useRef)();return Object(c.useEffect)((function(){(function(){var e=Object(d.a)(r.a.mark((function e(){var n,t,c,a,d,s,u,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.connect("https://xrtl.uni-jena.de",{auth:{token:o},autoConnect:!0}),t={audio:!1,video:{facingMode:"user",width:640,height:480}},c={iceServers:[{urls:["stun:stun.l.google.com:19302"]}]},e.next=5,navigator.mediaDevices.getUserMedia(t);case 5:return a=e.sent,n.connected?document.getElementById("background").style.background="#b6d7a8":document.getElementById("background").style.background="#ea9999",d=function(e){var t=new RTCPeerConnection(c);l[e]=t,m(l[e]=t);var o=document.getElementById("video").srcObject;o.getTracks().forEach((function(e){return t.addTrack(e,o)})),t.onicecandidate=function(t){t.candidate&&n.emit("candidate",{id:e,data:t.candidate})},t.createOffer().then((function(e){return t.setLocalDescription(e)})).then((function(){n.emit("offer",{id:e,data:t.localDescription})}))},s=function(e){try{l[e.id].setRemoteDescription(e.data)}catch(n){console.error("Remote answer is in stable state stable!")}},u=function(e){l[e.id].addIceCandidate(new RTCIceCandidate(e.data))},f=function(e){delete l[e]},document.getElementById("video").srcObject=a,n.emit("broadcaster join","Cam_1"),n.on("viewer",d),n.on("answer",s),n.on("candidate",u),n.on("disconnect peerConnection",f),e.abrupt("return",(function(){n.removeAllListeners("viewer",d),n.removeAllListeners("answer",s),n.removeAllListeners("candidate",u),n.removeAllListeners("disconnect peerConnection",f)}));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(u.jsx)("div",{id:"background",children:Object(u.jsx)("video",{id:"video",autoPlay:!0,playsInline:!0,ref:b})})};t(253);i.a.render(Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(f,{})}),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.ccee542b.chunk.js.map